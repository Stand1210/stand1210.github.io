<!DOCTYPE html>
<html lang="en">
<head>
    
</head>
<body>
<header>
    <p><a class="logo" href="http://js13kgames.com"><img src="img/js13kgames.png" alt="js13kGames"></a></p>
</header>
<main>
    <h1>Hello stand</h1>
</main>
<footer>
    <p>&copy; js13kGames 2012-2018, created and maintained by <a href="http://end3r.com">Andrzej Mazur</a> from <a href="http://enclavegames.com">Enclave Games</a>.</p>
</footer>
<script>
        window.onload = function(){
            if (window.performance || window.webkitPerformance) {
        var perf = window.performance || window.webkitPerformance;
        var timing = perf.timing;
        var navi = perf.navigation;
        var timer = setInterval(function() {
            if (0 !== timing.loadEventEnd) {
                clearInterval(timer);
                var data = {
                    url: window.location.href,
                    ua: window.navigator.userAgent,
                    dns :timing.domainLookupEnd - timing.domainLookupStart,
                    tcp :timing.connectEnd - timing.connectStart,
                    request : timing.responseEnd -timing.responseStart,
                    blank : timing.domLoading - timing.fetchStart,
                    domready : timing.domContentLoadedEventEnd - timing.fetchStart,
                    onload : timing.loadEventEnd - timing.fetchStart,
                    firstimagetime : 0,
                    isdirty : 0
                };
                console.log(data);
                console.log('DNS查询耗时 ：' + (timing.domainLookupEnd - timing.domainLookupStart).toFixed(0))
                console.log('TCP链接耗时 ：' + (timing.connectEnd - timing.connectStart).toFixed(0))
                console.log('request请求耗时 ：' + (timing.responseEnd - timing.responseStart).toFixed(0))
                console.log('解析dom树耗时 ：' + (timing.domComplete - timing.domInteractive).toFixed(0))
                console.log('白屏时间 ：' + (timing.responseStart - timing.navigationStart).toFixed(0))
                console.log('domready时间 ：' + (timing.domContentLoadedEventEnd - timing.navigationStart).toFixed(0))
                console.log('onload时间 ：' + (timing.loadEventEnd - timing.navigationStart).toFixed(0))

                if(t = performance.memory){
                    console.log('js内存使用占比 ：' + (timing.usedJSHeapSize / timing.totalJSHeapSize * 100).toFixed(2) + '%')
                }

                }
                })
        }}
    </script>
</body>
</html>
